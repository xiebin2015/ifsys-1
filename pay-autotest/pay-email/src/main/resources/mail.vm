<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">

    <style type="text/css">
        table { border-collapse: collapse; }
        th,td { border: 1px solid #888; }
        .failed{background:#aa2116;color:#fff}
        .passed{background:#1d953f;color:#fff}
        .problem{background:#dea32c;color:#fff}

        .text-failed{color:#aa2116}
        .text-passed{color:#1d953f}
        .text-problem{color:#dea32c}

        .unknow{background:#46485f;color:#fff}
        .title{background:#585eaa;color:#fff}
        table,td,tr{font-size:12px;}
        td{text-overflow: ellipsis;white-space: nowrap;overflow: hidden;}
        .flexJson{width:300px;}
    </style>
</head>
<body style='width:100%'>
你好 ${userName}:<br>
  
欢迎加入 独孤九剑 接口自动化测试!
<br>
当你收到这封邮件的时候，表示你关注的接口出现了点问题...
<br>
<table>
    <tr class='title'>
        <td>接口id</td>
        <td>接口名</td>
        <td>测试结果</td>
        <td>输入参数</td>
        <td colspan=2 style='text-align:center'>返回码</td>
        <td colspan=2 style='text-align:center'>输出参数</td>
        <td>访问模式</td>
        <td>关注者</td>
    </tr>

    #foreach( $mock in ${resulteMocks})
        ## 判断结果
        #if($mock.getTestResult() == '0' )
            #set($resultStyle = 'failed')
            #set($result = 'failed')
        #elseif($mock.getTestResult() == '1' )
            #set($resultStyle = 'passed')
            #set($result = 'passed')
        #elseif($mock.getTestResult() == '-1')
            #set($resultStyle = 'problem')
            #set($result = 'problem')
        #else
            #set($resultStyle = 'unknow')
            #set($result = $mock.getTestResult())
        #end

        ## 比较相等
        #if($mock.getRealRspCode() != $mock.getRspCode())
            #set($rspCodeStyle = 'text-problem')
        #end

        #if($mock.getResponseJson() != $mock.getRealResponseJson())
            #set($ResponseJsonStyle = 'text-problem')
        #end

        <tr>
            <td>$!mock.getIfId()</td>
            <td title='$mock.getIfDESC()'>$!mock.getIfName()</td>
            <td class='$!{resultStyle}'>$!{result}</td>
            <td><pre>$!mock.getRequestJson()</pre></td>
            <td>预期:$!mock.getRspCode()</td>
            <td class='$!rspCodeStyle'>实际:$!mock.getRealRspCode()</td>
            <td class='flexJson'>预期:<pre>$!mock.getResponseJson()</pre></td>
            <td class='flexJson $!ResponseJsonStyle'>实际:<pre>$!mock.getRealResponseJson()</pre></td>
            <td>$!mock.getIfPROTOCOL()</td>
            <td>$!mock.getUsername()</td>
        </tr>
    #end
</table>
<br>祝工作愉快!
</body>
</html>
